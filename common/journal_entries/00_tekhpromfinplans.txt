je_tekhpromfinplans = {
	icon = "gfx/interface/icons/invention_icons/philosophical_pragmatism.dds"

	group = je_group_historical_content

	scripted_button = je_inject_tekhpromfinplans_button

	is_shown_when_inactive = {
		
		OR = { 
			has_law = law_type:law_command_economy
			has_law = law_type:law_semi_command_economy
		}
		
	}

	possible = {
		
		#Semi Planned Economy
		has_law = law_type:law_semi_command_economy
		
	}

	immediate = {
		
		#Determine Investment Pool Size
		set_variable = {
			name = tekhpromfinplans_fund_size
			value = root.investment_pool
		}
		change_variable = {
			name = tekhpromfinplans_fund_size
			divide = 1000000
		}
		
	}

	fail = {
		
		#No longer a Semi Planned Economy
		NOT = { has_law = law_type:law_semi_command_economy }
		
	}
	
	on_fail = {
		
		remove_variable = tekhpromfinplans_fund_size
		
	}
	
	on_monthly_pulse = {
	
		effect = {
			
			#Determine Investment Pool Size
			set_variable = {
				name = tekhpromfinplans_fund_size
				value = root.investment_pool
			}
			change_variable = {
				name = tekhpromfinplans_fund_size
				divide = 1000000
			}
			
		}
		
	}

	weight = 50

	should_be_pinned_by_default = no

	transferable = no

	progressbar = no
}