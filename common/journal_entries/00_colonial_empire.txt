je_colonial_empire = {
	icon = "gfx/interface/icons/invention_icons/colonization.dds"

	group = je_group_foreign_affairs

	scripted_button = je_request_colonial_empire_intervention_button
	scripted_button = je_start_imperial_preference_button
	scripted_button = je_end_imperial_preference_button

	is_shown_when_inactive = {
		
		#Owns Colonial Subjects
		any_country = {
			is_subject_of = ROOT
			is_a_colonial_subject_gov = yes
		}
		
	}

	possible = {
		
		#Owns Colonial Subjects
		any_country = {
			is_subject_of = ROOT
			is_a_colonial_subject_gov = yes
			NOT = { is_subject_type = subject_type_mandate }
		}
		
		is_revolutionary = no
		is_secessionist = no
		
	}

	immediate = {
		
		#Count Empire members
		set_variable = { 
			name = colonial_empire_member_count
			value = 0 
		}
		every_country = {
			limit = {
				is_subject_of = ROOT
				is_a_colonial_subject_gov = yes
			}
			ROOT = {
				change_variable = {
					name = colonial_empire_member_count
					add = 1
				}
			}
		}
		
	}

	fail = {
		
		#Owns Colonial Subjects
		custom_tooltip = {
			text = no_colonial_subjects.tt
			NOT = {
				any_country = {
					is_subject_of = ROOT
					is_a_colonial_subject_gov = yes
					NOT = { is_subject_type = subject_type_mandate }
				}
			}
		}
		
	}
	
	on_fail = {
		
		#Display colonial subjects
		every_country = {
			limit = {
				is_subject_of = ROOT
				is_subject_type = subject_type_dominion
			}
			save_scope_as = dominion_subject_label
			custom_tooltip = {
				text = dominion_subject_label.tt
			}
		}
		every_country = {
			limit = {
				is_subject_of = ROOT
				is_subject_type = subject_type_semi_autonomous_colony
			}
			save_scope_as = semi_autonomous_colony_subject_label
			custom_tooltip = {
				text = semi_autonomous_colony_subject_label.tt
			}
		}
		every_country = {
			limit = {
				is_subject_of = ROOT
				is_subject_type = subject_type_mandate
			}
			save_scope_as = mandate_subject_label
			custom_tooltip = {
				text = mandate_subject_label.tt
			}
		}
		
		#Clear variables
		remove_variable = imperial_preference_enacted
		
	}
	
	on_monthly_pulse = {
	
		effect = {
			
			#Count Empire members
			set_variable = { 
				name = colonial_empire_member_count
				value = 0 
			}
			every_country = {
				limit = {
					is_subject_of = ROOT
					is_a_colonial_subject_gov = yes
				}
				ROOT = {
					change_variable = {
						name = colonial_empire_member_count
						add = 1
					}
				}
			}
			
		}
		
	}

	weight = 50

	should_be_pinned_by_default = no

	transferable = no

	progressbar = no
}